<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Calculator MVP</title>
    <link rel="stylesheet" href="src/css/main.css">
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <aside id="sidebar">
            <h2 style="font-size: 1.2rem; margin-bottom: 1rem; color: #fff;">FinanceApp</h2>
            <nav id="main-nav">
                <ul>
                    <li>
                        <button class="nav-btn active" data-section="basic-calc">
                            <span>üî¢</span> B√°sica
                        </button>
                    </li>
                    <li>
                        <button class="nav-btn" data-section="loans-movements">
                            <span>üí∏</span> Pr√©stamos
                        </button>
                    </li>
                    <li>
                        <button class="nav-btn" data-section="trading-tools">
                            <span>üìà</span> Trading
                        </button>
                    </li>
                    <li>
                    <li>
                        <button class="nav-btn" data-section="currency-converter">
                            <span>üí±</span> Conversor
                        </button>
                    </li>
                    <li>
                        <button class="nav-btn" data-section="roi-calculator" data-i18n="sidebar.roi">
                            <span>üìä</span> ROI
                        </button>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header>
                <h1>Finance Calculator</h1>
                <p>Herramienta financiera para c√°lculos r√°pidos y precisos.</p>
            </header>
            <!-- Calculadora B√°sica - Apple Style -->
            <section id="basic-calc" class="section">
                <div class="apple-calc">
                    <h2>Calculadora Cient√≠fica</h2>

                    <!-- Calculator Display -->
                    <div class="calc-display" id="calc-display">0</div>

                    <!-- Calculator Button Grid -->
                    <div class="calc-grid">
                        <!-- Row 1: Scientific Functions -->
                        <button class="calc-button function" data-func="sin">sin</button>
                        <button class="calc-button function" data-func="cos">cos</button>
                        <button class="calc-button function" data-func="tan">tan</button>
                        <button class="calc-button function" data-func="sqrt">‚àö</button>

                        <!-- Row 2: More Scientific Functions -->
                        <button class="calc-button function" data-func="square">x¬≤</button>
                        <button class="calc-button function" data-func="cube">x¬≥</button>
                        <button class="calc-button function" data-func="exp">e^x</button>
                        <button class="calc-button function" data-func="log">log</button>

                        <!-- Row 3: Additional Functions -->
                        <button class="calc-button function" data-func="ln">ln</button>
                        <button class="calc-button utility" data-action="ac">AC</button>
                        <button class="calc-button utility" data-action="sign">+/-</button>
                        <button class="calc-button utility" data-action="percent">%</button>

                        <!-- Row 4: Numbers and Operators -->
                        <button class="calc-button number" data-num="7">7</button>
                        <button class="calc-button number" data-num="8">8</button>
                        <button class="calc-button number" data-num="9">9</button>
                        <button class="calc-button operator" data-op="divide">√∑</button>

                        <!-- Row 5 -->
                        <button class="calc-button number" data-num="4">4</button>
                        <button class="calc-button number" data-num="5">5</button>
                        <button class="calc-button number" data-num="6">6</button>
                        <button class="calc-button operator" data-op="multiply">√ó</button>

                        <!-- Row 6 -->
                        <button class="calc-button number" data-num="1">1</button>
                        <button class="calc-button number" data-num="2">2</button>
                        <button class="calc-button number" data-num="3">3</button>
                        <button class="calc-button operator" data-op="subtract">-</button>

                        <!-- Row 7 -->
                        <button class="calc-button number zero" data-num="0">0</button>
                        <button class="calc-button number" data-num=".">.</button>
                        <button class="calc-button operator" data-op="add">+</button>
                        <button class="calc-button operator equals" data-action="equals">=</button>
                    </div>
                </div>
            </section>

            <!-- Pr√©stamos y Movimientos -->
            <section id="loans-movements" class="section">
                <div class="card">
                    <h2>Pr√©stamos y Movimientos</h2>

                    <div class="grid-2">
                        <!-- Loan Amortization -->
                        <div class="subsection">
                            <h3>Amortizaci√≥n de Pr√©stamo</h3>
                            <div class="form-group">
                                <label for="loan-principal">Monto del Pr√©stamo ($)</label>
                                <input type="number" id="loan-principal" placeholder="Ej. 10000">
                            </div>
                            <div class="form-group">
                                <label for="loan-rate">Tasa de Inter√©s Anual (%)</label>
                                <input type="number" id="loan-rate" step="0.01" placeholder="Ej. 5">
                            </div>
                            <div class="form-group">
                                <label for="loan-months">Plazo (Meses)</label>
                                <input type="number" id="loan-months" placeholder="Ej. 12">
                            </div>
                            <button id="btn-loan-amortization" class="btn-primary">Calcular Amortizaci√≥n</button>

                            <div class="table-container mt-4">
                                <table id="amortization-table">
                                    <thead>
                                        <tr>
                                            <th>Mes</th>
                                            <th>Pago</th>
                                            <th>Capital</th>
                                            <th>Intereses</th>
                                        </tr>
                                    </thead>
                                    <tbody id="amortization-table-body">
                                        <!-- Amortization schedule will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Movement Tracking -->
                        <div class="subsection">
                            <h3>Registro de Movimientos</h3>
                            <div class="form-group">
                                <label for="movement-type">Tipo de Movimiento</label>
                                <select id="movement-type">
                                    <option value="ingreso">Ingreso</option>
                                    <option value="gasto">Gasto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="movement-amount">Monto ($)</label>
                                <input type="number" id="movement-amount" step="0.01" placeholder="Ej. 1000">
                            </div>
                            <div class="form-group">
                                <label for="movement-description">Descripci√≥n</label>
                                <input type="text" id="movement-description" placeholder="Ej. Salario mensual">
                            </div>
                            <button id="btn-track-movement" class="btn-primary">Registrar Movimiento</button>

                            <div class="balance-summary mt-4">
                                <h4>Balance Actual</h4>
                                <div id="balance-display" class="result-box" style="font-size: 1.5rem; padding: 1rem;">
                                    $0.00</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Trading Tools -->
            <section id="trading-tools" class="section">
                <div class="card">
                    <h2>Herramientas de Trading</h2>

                    <div class="grid-2">
                        <!-- Calculators Column -->
                        <div class="subsection">
                            <h3>Calculadora de Posici√≥n</h3>
                            <div class="form-group">
                                <label for="trading-capital">Capital Total ($)</label>
                                <input type="number" id="trading-capital" step="0.01" placeholder="Ej. 10000">
                            </div>
                            <div class="form-group">
                                <label for="trading-entry">Precio de Entrada ($)</label>
                                <input type="number" id="trading-entry" step="0.01" placeholder="Ej. 50">
                            </div>
                            <div class="form-group">
                                <label for="trading-risk">Riesgo (%)</label>
                                <input type="number" id="trading-risk" step="0.1" placeholder="Ej. 1-2%">
                            </div>
                            <div class="form-group">
                                <label for="trading-leverage">Apalancamiento (x)</label>
                                <input type="number" id="trading-leverage" step="1" value="1" placeholder="Ej. 10">
                            </div>
                            <div class="form-group">
                                <label for="trading-rr">Ratio Riesgo/Beneficio</label>
                                <input type="number" id="trading-rr" step="0.1" value="2" placeholder="Ej. 2">
                            </div>
                            <button id="btn-trading-calculate" class="btn-primary">Calcular Posici√≥n</button>
                        </div>

                        <!-- Results Column -->
                        <div class="subsection trading-results">
                            <h3>Resultados del Trade</h3>
                            <div class="grid-2">
                                <div>
                                    <strong>Stop Loss (SL):</strong>
                                    <div id="result-sl" class="text-error"
                                        style="font-size: 1.2rem; font-weight: bold;">$0.00</div>
                                </div>
                                <div>
                                    <strong>Take Profit (TP):</strong>
                                    <div id="result-tp" class="text-success"
                                        style="font-size: 1.2rem; font-weight: bold;">$0.00</div>
                                </div>
                                <div>
                                    <strong>Tama√±o de Lote/Unidades:</strong>
                                    <div id="result-lot" style="font-size: 1.2rem; font-weight: bold;">0.0000</div>
                                </div>
                                <div>
                                    <strong>Margen Requerido:</strong>
                                    <div id="result-margen" style="font-size: 1.2rem; font-weight: bold;">$0.00</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Currency Converter -->
            <section id="currency-converter" class="section">
                <div class="card">
                    <h2>Conversor de Monedas</h2>

                    <div class="grid-2">
                        <!-- Left Column: Inputs -->
                        <div class="subsection">
                            <h3>Datos de Conversi√≥n</h3>
                            <div class="form-group">
                                <label for="currency-amount">Monto a Convertir</label>
                                <input type="number" id="currency-amount" placeholder="Ej. 100" step="0.01" min="0">
                            </div>

                            <div class="form-group">
                                <label for="currency-from">De (Moneda Origen)</label>
                                <select id="currency-from">
                                    <option value="USD" selected>USD - D√≥lar Estadounidense</option>
                                    <option value="EUR">EUR - Euro</option>
                                    <option value="GBP">GBP - Libra Esterlina</option>
                                    <option value="JPY">JPY - Yen Japon√©s</option>
                                    <option value="CAD">CAD - D√≥lar Canadiense</option>
                                    <option value="CNY">CNY - Yuan Chino</option>
                                    <option value="BOB">BOB - Boliviano</option>
                                    <option value="PEN">PEN - Sol Peruano</option>
                                    <option value="BRL">BRL - Real Brasile√±o</option>
                                    <option value="CLP">CLP - Peso Chileno</option>
                                    <option value="ARS">ARS - Peso Argentino</option>
                                    <option value="COP">COP - Peso Colombiano</option>
                                </select>
                            </div>

                            <div style="text-align: center; margin: 1rem 0;">
                                <button id="btn-swap-currencies" class="btn-secondary"
                                    style="width: auto; padding: 0.5rem 2rem;">üîÑ Invertir Monedas</button>
                            </div>

                            <div class="form-group">
                                <label for="currency-to">A (Moneda Destino)</label>
                                <select id="currency-to">
                                    <option value="USD">USD - D√≥lar Estadounidense</option>
                                    <option value="EUR">EUR - Euro</option>
                                    <option value="GBP">GBP - Libra Esterlina</option>
                                    <option value="JPY">JPY - Yen Japon√©s</option>
                                    <option value="CAD">CAD - D√≥lar Canadiense</option>
                                    <option value="CNY">CNY - Yuan Chino</option>
                                    <option value="BOB" selected>BOB - Boliviano</option>
                                    <option value="PEN">PEN - Sol Peruano</option>
                                    <option value="BRL">BRL - Real Brasile√±o</option>
                                    <option value="CLP">CLP - Peso Chileno</option>
                                    <option value="ARS">ARS - Peso Argentino</option>
                                    <option value="COP">COP - Peso Colombiano</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <button id="btn-convert-currency" class="btn-primary">Convertir Moneda</button>
                            </div>
                        </div>

                        <!-- Right Column: Results -->
                        <div class="subsection">
                            <h3>Resultado de la Conversi√≥n</h3>
                            <div id="conversion-result"
                                style="display: none; margin-top: 1rem; padding: 2rem; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-radius: 12px; text-align: center;">
                                <div style="margin-bottom: 1rem;">
                                    <span id="result-amount"
                                        style="font-size: 2.5rem; font-weight: 700; color: #2563ea; font-family: monospace;">0.00</span>
                                    <span id="result-currency"
                                        style="font-size: 1.5rem; margin-left: 0.5rem; color: #64748b;">USD</span>
                                </div>
                                <div id="exchange-rate-display"
                                    style="font-size: 0.9rem; color: #64748b; margin-top: 0.5rem;">
                                    Tasa: 1.0000
                                </div>
                            </div>

                            <div class="subsection" style="margin-top: 2rem;">
                                <h4>√öltimas Conversiones</h4>
                                <ul id="currency-history-list" style="list-style: none; padding: 0;">
                                    <!-- Populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            </section>

            <!-- ROI Calculator -->
            <section id="roi-calculator" class="section">
                <div class="card">
                    <h2 data-i18n="roi.title">Calculadora de ROI</h2>

                    <div class="roi-tabs">
                        <button class="roi-tab active" data-tab="simple" data-i18n="roi.tabs.simple">ROI Simple</button>
                        <button class="roi-tab" data-tab="annualized" data-i18n="roi.tabs.annualized">ROI
                            Anualizado</button>
                    </div>

                    <div class="grid-2">
                        <!-- Left Column: Form -->
                        <div class="subsection">
                            <h3 data-i18n="roi.form.title">Datos de la Inversi√≥n</h3>
                            <div class="form-group">
                                <label for="roi-initial" data-i18n="roi.form.initial">Inversi√≥n Inicial ($)</label>
                                <input type="number" id="roi-initial" placeholder="Ej. 10000" step="0.01" min="0"
                                    required>
                            </div>
                            <div class="form-group">
                                <label for="roi-final" data-i18n="roi.form.final">Valor Final ($)</label>
                                <input type="number" id="roi-final" placeholder="Ej. 15000" step="0.01" min="0"
                                    required>
                            </div>
                            <div class="form-group">
                                <label for="roi-costs" data-i18n="roi.form.costs">Costos Adicionales ($) -
                                    Opcional</label>
                                <input type="number" id="roi-costs" placeholder="Ej. 500" step="0.01" min="0">
                            </div>
                            <div class="form-group" id="roi-time-group" style="display: none;">
                                <label for="roi-time" data-i18n="roi.form.time">Tiempo de Inversi√≥n (A√±os)</label>
                                <input type="number" id="roi-time" placeholder="Ej. 2" step="0.1" min="0.1">
                            </div>
                            <div class="form-group">
                                <button id="btn-calculate-roi" class="btn-primary"
                                    data-i18n="roi.form.calculate">Calcular ROI</button>
                            </div>
                        </div>

                        <!-- Right Column: Results -->
                        <div class="subsection">
                            <h3 data-i18n="roi.results.title">Resultados</h3>

                            <div id="roi-empty-state" style="text-align: center; padding: 3rem; color: #94a3b8;">
                                <p data-i18n="roi.results.empty">Ingresa los datos de tu inversi√≥n para calcular el ROI
                                </p>
                            </div>

                            <div id="roi-results" style="display: none;">
                                <div class="roi-result-main">
                                    <div class="roi-percentage" id="roi-percentage-display">0.00%</div>
                                    <div class="roi-classification" id="roi-classification">Clasificaci√≥n</div>
                                </div>

                                <div class="roi-progress-bar">
                                    <div class="roi-progress-fill" id="roi-progress-fill" style="width: 0%;"></div>
                                </div>

                                <div class="roi-details">
                                    <div class="roi-detail-item">
                                        <strong data-i18n="roi.results.netGain">Ganancia Neta:</strong>
                                        <span id="roi-net-gain">$0.00</span>
                                    </div>
                                    <div class="roi-detail-item">
                                        <strong data-i18n="roi.results.totalInvestment">Inversi√≥n Total:</strong>
                                        <span id="roi-total-investment">$0.00</span>
                                    </div>
                                    <div class="roi-detail-item">
                                        <strong data-i18n="roi.results.finalValue">Valor Final:</strong>
                                        <span id="roi-final-value-display">$0.00</span>
                                    </div>
                                    <div class="roi-detail-item">
                                        <strong data-i18n="roi.results.totalReturn">Retorno Total:</strong>
                                        <span id="roi-total-return">0.00%</span>
                                    </div>
                                </div>

                                <div id="roi-annualized-details" style="display: none;">
                                    <div class="roi-detail-item">
                                        <strong>ROI Anualizado (CAGR):</strong>
                                        <span id="roi-annualized-display">0.00% / a√±o</span>
                                    </div>
                                </div>

                                <div class="roi-interpretation" id="roi-interpretation">
                                    <!-- Dynamic message -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Resultados y Historial (Global) -->
            <section id="results-section" class="card section mt-4">
                <h2>Resultado Global</h2>
                <div id="result-display" class="result-box">0.00</div>
                <button id="btn-save-history" class="btn-secondary">Guardar al Historial</button>
            </section>

        </main>

        <aside id="history-panel">
            <h3>Historial</h3>
            <ul id="calc-history"></ul>
            <button id="btn-clear-history" class="btn-small w-full">Limpiar Todo</button>
        </aside>
    </div>

    <footer>
        <p>&copy; 2025 Finance Calculator MVP</p>
    </footer>

    <script src="src/js/calculations.js"></script>
    <script src="src/js/history.js"></script>
    <script src="src/js/calculations.js"></script>
    <script src="src/js/history.js"></script>
    <script src="src/js/currency-converter.js"></script>
    <script src="src/js/roi-calculator.js"></script>
</body>

</html>